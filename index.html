<!DOCTYPE html>
<html>
<head>
  <title>Address Verifier</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    #result { margin-top: 20px; font-weight: bold; }
  </style>
</head>
<body>
  <h2>Address Verification</h2>
  <input type="text" id="addressInput" placeholder="Enter address with PIN" size="50">
  <button onclick="verifyAddress()">Verify</button>
  <div id="result"></div>

  <script>
    const apiUrl = "htps://script.google.com/macros/s/AKfycbxQD7yIa9t8CH6-hbB818ic-Dzi4VcLjqUsAEGZhgOTyLU65NKhIfgDt5sTM56JUqAHTw/exec"; // replace with your /exec URL

    async function verifyAddress() {
      const address = document.getElementById("addressInput").value.trim();
      const resultDiv = document.getElementById("result");
      resultDiv.textContent = "⏳ Verifying...";

      try {
        const response = await fetch(apiUrl, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ address: address })  // ✅ JSON
        });

        const data = await response.json();
        console.log("Response:", data);

        if (data.status === "success") {
          const office = data.postalData[0];
          resultDiv.style.color = "green";
          resultDiv.textContent =
            `✅ Verified: ${data.input_address}\n` +
            `District: ${office.District}, State: ${office.State}`;
        } else {
          resultDiv.style.color = "red";
          resultDiv.textContent = `❌ Verification failed: ${data.message}`;
        }
      } catch (err) {
        resultDiv.style.color = "red";
        resultDiv.textContent = "⚠️ Network error: " + err.message;
      }
    }
  </script>
</body>
</html>
